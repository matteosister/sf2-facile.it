<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Symfony2@Facile.it</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">
        <link rel="stylesheet" href="css/custom.css">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
        <style>
            table, th, td {
                border: 1px solid #CCC;
            }
        </style>
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section>
                    <h2>Symfony2@facile.it</h2>
                    <h3>Introduzione a Symfony2</h3>
                    <img class="no-border" src="images/symfony2.png" width="250" />
                    <img class="no-border" src="images/logo_facile.png" width="250" style="position: relative; top: -90px" />
                </section>
                <section>
                    <section>
                        <table>
                            <tr>
                                <th>Version</th>
                                <th>Release date</th>
                                <th>PHP version</th>
                                <th>End of maintenance</th>
                                <th>Notes</th>
                            </tr>
                            <tr>
                                <td>1.0</td>
                                <td align="right">January 2007</td>
                                <td align="right">&gt;= 5.0</td>
                                <td align="right">January 2010</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>1.1</td>
                                <td align="right">June 2008</td>
                                <td align="right">&gt;= 5.1</td>
                                <td align="right">June 2009</td>
                                <td>security-related patches were applied until June 2010</td>
                            </tr>
                        </table>
                    </section>
                    <section>
                        <table>
                            <tbody>
                                <tr>
                                    <th>Version</th>
                                    <th>Release date</th>
                                    <th>PHP version</th>
                                    <th>End of maintenance</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td>1.2</td>
                                    <td align="right">December 2008</td>
                                    <td align="right">&gt;= 5.2</td>
                                    <td align="right">November 2009</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>1.3</td>
                                    <td align="right">November 2009</td>
                                    <td align="right">&gt;= 5.2.4</td>
                                    <td align="right">November 2010</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>1.4</td>
                                    <td align="right">November 2009</td>
                                    <td align="right">&gt;= 5.2.4</td>
                                    <td align="right">November 2012</td>
                                    <td>LTS version. 1.4 is identical to 1.3, but does not support the 1.3 deprecated features.</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <section>
                        <table>
                            <tr>
                                <th>Version</th>
                                <th>Release date</th>
                                <th>PHP version</th>
                                <th>End of maintenance</th>
                                <th>Notes</th>
                            </tr>
                            <tr>
                                <td>2.0</td>
                                <td align="right">July 2011</td>
                                <td align="right">&gt;= 5.3.2</td>
                                <td align="right"></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>2.1</td>
                                <td align="right">September 2012</td>
                                <td align="right">&gt;= 5.3.3</td>
                                <td align="right"></td>
                                <td>More components are part of the stable API.</td>
                            </tr>
                        </table>
                    </section>
                    <section>
                        <table>
                            <tbody><tr>
                                    <th>Version</th>
                                    <th>Release date</th>
                                    <th>PHP version</th>
                                    <th>End of maintenance</th>
                                    <th>Notes</th>
                                </tr>

                                <tr>
                                    <td>2.2</td>
                                    <td align="right">February 2013</td>
                                    <td align="right"></td>
                                    <td align="right">November 2013</td>
                                    <td>will be released at the end of February 2013;</td>
                                </tr>
                                <tr>
                                    <td>2.3</td>
                                    <td align="right">May 2013</td>
                                    <td align="right"></td>
                                    <td align="right">May 2016</td>
                                    <td>(the first LTS) will be released at the end of May 2013;</td>
                                </tr>
                            </tbody></table>
                    </section>
                </section>

                <section>
                    <h3>un framework php > 5.3.3</h3>
                    <p>MVC? <strong>NO</strong></p>
                    <p></p>
                    <p>Request/Response</p>
                    <p>costruito sulla specifica HTTP</p>
                </section>

                <section>
                    <h3>Il viaggio dalla request alla response</h3>
                    <img src="images/request-flow.png" width="690" />
                </section>

                <section>
                    <img src="images/lego.jpg" width="400" />
                    <p><strong>un insieme di <a href="https://github.com/symfony/symfony/tree/master/src/Symfony/Component">componenti</a>
                            (quasi) disaccoppiati</strong></p>
                    <p>Zend Framework 2 ha la stessa impostazione</p>
                    <p>i componenti sono i <em>mattoncini</em> base di Symfony2, creano uno strato sopra il php, per astrarre
                        compiti comuni ma complicati se eseguiti in php puro.</p>
                    <p>Sono testati, sicuri e open source</p>
                </section>

                <section>
                    <h2>come gestire tutti questi pacchetti e librerie?</h2>
                    <h3>e gli aggiornamenti?</h3>
                    <h3>e le dipendenze?</h3>
                </section>

                <section>
                    <h1>composer</h1>
                </section>

                <section>
                    <a href="http://getcomposer.org/">getcomposer.org</a>
                    <p></p>
                    <img src="images/getcomposer.png" />
                </section>

                <section>
                    <a href="http://packagist.org">packagist.org</a>
                    <p></p>
                    <img src="images/phpunit.png">
                </section>

                <section>
                    <h3>Per usare i componenti di Symfony non serve usare tutto il framework</h3>
                    <h4>è semplice codice php</h4>
                    <h3>serve solo un autoloader PSR-*</h3>
                    <h4>con composer è tutto più semplice</h4>
                </section>

                <section>
                    <h2>Filesystem</h2>
                    <h4>Gestione filesystem</h4>
                    <pre><code contenteditable class="php">use Symfony\Component\Filesystem\Filesystem;
use Symfony\Component\Filesystem\Exception\IOException;

$fs = new Filesystem();

try {
    $fs->mkdir('/tmp/random/dir/' . mt_rand());
} catch (IOException $e) {
    echo "An error occurred while creating your directory";
}
// this directory exists, return true
$fs->exists('/tmp/photos');
// works only if image-ICC has been modified after image.jpg
$fs->copy('image-ICC.jpg', 'image.jpg');
// image.jpg will be overridden
$fs->copy('image-ICC.jpg', 'image.jpg', true);</code></pre>
                </section>

                <section>
                    <h2>Process</h2>
                    <h4>Eseguire comandi come sub-process</h4>
                    <pre><code class="php">
use Symfony\Component\Process\Process;

$process = new Process('ls -lsa');
$process->setTimeout(3600);
$process->run();
if (!$process->isSuccessful()) {
    throw new \RuntimeException($process->getErrorOutput());
}

print $process->getOutput();
                    </code></pre>
                </section>

                <section>
                    <h2>Event Dispatcher</h2>
                    <h4>gestione di eventi (emitter, listenter e subscriber) dove non si può usare l'OO</h4>
                    <p><small>ridistribuzione di codice, plugin systems</small></p>
                    <pre><code contenteditable class="php">
use Symfony\Component\EventDispatcher\EventDispatcher;
$dispatcher = new EventDispatcher();

$listener = new AcmeListener();
$dispatcher->addListener('foo.action', array($listener, 'onFooAction'));

// closures
$dispatcher->addListener('foo.action', function (Event $event) {
    // will be executed when the foo.action event is dispatched
});

// create the FilterOrderEvent and dispatch it
$event = new FilterOrderEvent($order);
$dispatcher->dispatch(StoreEvents::STORE_ORDER, $event);
                    </code></pre>
                </section>

                <section>
                    <h2>Dom Crawler/CssSelector</h2>
                    <p><small>crawler di documenti HTML, OO style (spider?)</small></p>
                    <pre><code class="php">&lt;?php
$crawler = new Symfony\Component\DomCrawler\Crawler($html);
// xpath filter
$crawler = $crawler->filterXPath('descendant-or-self::body/p');
// css selector, alla jquery
$crawler = $crawler->filter('body > p');
$crawler = $crawler->filter('body > p')->reduce(function ($node, $i) {
    // filter even nodes
    return ($i % 2) == 0;
});
// fluent interface
$crawler->filter('body > p')->eq(0);
$crawler->filter('body > p')->first();
$crawler->filter('body > p')->last();
$crawler->filter('body > p')->siblings();
$crawler->filter('body > p')->nextAll();
$crawler->filter('body > p')->previousAll();
$crawler->filter('body')->children();
$crawler->filter('body > p')->parents();

// form
$form = $crawler->selectButton('validate')->form(array(
    'name' => 'Ryan',
));
// settare valori sul form
$form->setValues(array(
    'registration[username]' => 'symfonyfan',
    'registration[terms]'    => 1,
));

// get back an array of values - in the "flat" array like above
$values = $form->getValues();

// returns the values like PHP would see them,
// where "registration" is its own array
$values = $form->getPhpValues();
</code></pre>
                </section>

                <section>
                    <h2>Console</h2>
                    <h4>Scrivere comandi per console in php</h4>
                    <p><small>gestione di task per cron, manutenzioni al db etc</small></p>
                </section>

                <section>
                    <pre><code contenteditable class="php">class GreetCommand extends Command
{
    protected function configure()
    {
        $this
            ->setName('demo:greet')
            ->setDescription('Greet someone')
            ->addArgument(
                'name',
                InputArgument::OPTIONAL,
                'Who do you want to greet?'
            )
            ->addOption(
               'yell',
               null,
               InputOption::VALUE_NONE,
               'If set, the task will yell in uppercase letters'
            )
        ;
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $name = $input->getArgument('name');
        if ($name) {
            $text = 'Hello '.$name;
        } else {
            $text = 'Hello';
        }

        if ($input->getOption('yell')) {
            $text = strtoupper($text);
        }

        $output->writeln($text);
    }
}</code></pre>
                </section>

                <section>
                    <small>console.php</small>
                    <pre><code class="php">#!/usr/bin/env php
# app/console
&lt;?php

use Acme\DemoBundle\Command\GreetCommand;
use Symfony\Component\Console\Application;

$application = new Application();
$application->add(new GreetCommand);
$application->run();

</code></pre>
                    <small>command line</small>
                    <pre><code class="php">$ php console.php demo:greet Facile
Hello Facile
</code></pre>
                </section>

                <section>
                    <h2>Console di Symfony2</h2>
                    <img src="images/console.png" />
                </section>

                <section>
                    <h2>come si utilizzano?</h2>
                    <pre><code class="bash">$ mkdir project
$ cd project
$ composer require symfony/filesystem 2.1.*</code></pre>
                    <p>composer crea la cartella vendor, scarica le dipendenze e crea un autoloader</p>
                    <pre><code contenteditable class="php">include __DIR__.'/vendor/autoload.php';

use Symfony\Component\Filesystem\Filesystem;

$fs = new Filesystem();
$fs->mkdir('watta!');</code></pre>
                </section>

                <section>
                    <h2>altri componenti</h2>
                    <ul>
                        <li class="fragment"><strong>HttpFoundation</strong> -- <em>il protocollo http object oriented</em></li>
                        <li class="fragment"><strong>DependencyInjection</strong> -- <em>creazione di service container</em></li>
                        <li class="fragment"><strong>Finder</strong> -- <em>ricercare file sul filesystem</em></li>
                        <li class="fragment"><strong>ClassLoader</strong> -- <em>autoloader universale</em></li>
                        <li class="fragment"><strong>Config</strong> -- <em>definire file di configurazione e validarla</em></li>
                        <li class="fragment"><strong>Routing</strong> -- <em>mappa una richiesta http a un set di variabili di configurazione</em></li>
                        <li class="fragment"><strong>HttpKernel</strong> -- <em>struttura per convertire una Request in una Response, base per full stack framework</em></li>
                        <li class="fragment"><strong>Security</strong> -- <em>sistema di sicurezza completo (anche troppo)</em></li>
                    </ul>
                </section>

                <section>
                    <h1>ma Symfony?</h1>
                </section>

                <section>
                    <img src="images/folders.png" />
                    <ul>
                        <li><strong>app</strong> configurazione generale dell'app</li>
                        <li><strong>src</strong> tutto il nostro codice</li>
                        <li><strong>vendor</strong> tutte le librerie/bundle non nostri che utilizziamo (non toccare!)</li>
                        <li><strong>web</strong> cartella pubblica (vhost) con front controllers e assets</li>
                    </ul>
                </section>

                <section>
                    <h2>una request symfony</h2>
                </section>

                <section>
                    <p><small># app/config/routing.yml</small></p>
                    <pre><code contenteditable class="yml">contact:
    pattern:  /contact
    defaults: { _controller: FacileCmsBundle:Main:spider }</code></pre>
                    <div class="fragment">
                        <small># src/Facile/CmsBundle/Controller/MainController.php</small>
                        <pre><code contenteditable class="php">class MainController
{
    public function spiderAction()
    {
        return new Response('Spider!');
    }
}</code></pre>
                    </div>
                </section>

                <section>
                    <p>Al di sopra dei componenti ci sono i <strong>Bundle</strong></p>
                    <p><em>Ogni cosa è un bundle in Symfony2.</em></p>
                    <p>Symfony2 stesso in realtà è un bundle sviluppato da Sensio Labs che si chiama
                        <a href="https://github.com/symfony/symfony/tree/master/src/Symfony/Bundle/FrameworkBundle">FrameworkBundle</a></p>
                    <p>creare un sito in Symfony2 == creare un bundle</p>
                </section>

                <section>
                    <h2>knpbundles.com</h2>
                    <img src="images/knpbundles.png" />
                </section>

                <section>
                    <h2>i bundle più conosciti</h2>
                </section>

                <section>
                    <p>SonataAdminBundle</p>
                    <p><small>backend generator</small></p>
                    <p>gestione dei backend tramite classi php, i form di symfony e il container</p>
                    <p>CRUD, tutto è customizzabile (pagando)</p>
                </section>

                <section>
                    <p>FOSUserBundle</p>
                    <p><small>gestione utente / login</small></p>
                    <p>form login, recupero password, conferma</p>
                </section>

                <section>
                    <p>AsseticBundle</p>
                    <p><small>gestione degli assets</small></p>
                    <p>in sviluppo compila on-the-fly js e css</p>
                    <p>supporta filtri come sass, compass, less, coffeescript, closures, cssrewrite</p>
                    <p>uglifyjs, minify dei file in prod, con dump su filesystem</p>
                    <p>sul server di produzione, un solo file per css e uno solo file per javascript, minificati</p>
                    <p>senza fare nulla 8)</p>
                </section>

                <section>
                    <p>SerializerBundle</p>
                    <p><small>serializzazione di oggetti (api, web serivices)</small></p>
                    <pre><code class="twig">{{ articoli|serialize|raw }}
{{ articoli|serialize('xml') }}</code></pre>
                    <p><small>un template in twig, per renderizzare un file json</small></p>
                    <pre><code class="json">[
{% for articolo in articoli %}
    {{ articolo|serialize|raw }}{{ loop.last ? '' : ','}}
{% else %}
    { "response": "non ci sono articoli" }
{% endfor %}
]</code></pre>
                </section>

                <section>
                    <p>JMSI18nRoutingBundle</p>
                    <p><small>routing multilingua</small></p>
                    <p>rotte tradotte, con o senza prefisso</p>
                    <pre><code>/it/articoli -> /en/articles
/articoli -> /en/articles
/articoli -> /articles</code></pre>
                    <p>zero configurazione</p>
                </section>

                <section>
                    <p>KnpMenuBundle</p>
                    <p><small>gestione di menu ad oggetti</small></p>
                </section>

                <section>
                    <p>LiipImagineBundle</p>
                    <p><small>gestione delle immagini</small></p>
                    <p>basato sulla libreria <em>Imagine</em></p>
                    <p>gestisce il ridimensionamento e la generazione di thumbs con un interfaccia ad oggetti</p>
                    <p>in più permette di aggiungere ombre, skew, riflessioni...</p>
                    <p>usa imagemagick, gd2 o Gmagick con la stessa interfaccia</p>
                    <p>generazione a runtime delle thumbs, cache automatico</p>
                </section>

                <section>
                    <p>LiipFunctionalTestBundle</p>
                    <p><small>test funzionali</small></p>
                    <p>TDD!</p>
                    <p>symfony è completamente integrato con phpunit</p>
                    <p>non ci sono scuse per non fare test unitari e funzionali</p>
                </section>
            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme || 'default', // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                    // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
